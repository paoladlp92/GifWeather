<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Favorite Movies</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css" />
</head>

<body>
    <div id="city-view"></div>
    <div class="temp"></div>
    <div id="images">
    <div class="container">

        <form id="city-form">
            <span id="cityList">pon ciudad :
                <input type="text" id="city-input"><br>
                <input id="find-city" type="submit" value="City Search">
            </span>
        </form>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript">
            var putCity;
            
            $("#find-city").on("click", function (event) {
                event.preventDefault();

                var movie = $("#movie-input").val();
                var getCity = $("#city-input").val().trim();
                var putCity = $("<p>");
                putCity.attr("id");
                putCity.text(getCity);
                $("#city-view").append(putCity);

                var putCity = $("#city-input").val();
                var APIKey = "0273302ea17d84a29b00b53473f15756";
                var queryURL = "https://api.openweathermap.org/data/2.5/weather?q=" + putCity + ",us&appid=" + APIKey;

                $.ajax({
                    url: queryURL,
                    method: "GET"
                })

                    .then(function (response) {

                        console.log(queryURL);
                        console.log(response);

                        //generate list of five movies according to weather.


                        if (response.weather[0].main === "Clear") {
                            alert("It's sunny");
                           

                            var queryURL = "https://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC&tag=sun";
                            $.ajax({
                                url: queryURL,
                                method: "GET"
                            })
                                .then(function (response) {
                                   
                                    var imageUrl = response.data.image_original_url;
                                    var catImage = $("<img>");
                                    catImage.attr("src", imageUrl);
                                    $("#images").prepend(catImage);
                                    
                                });
                        }


                        if (response.weather[0].main === "Rain") {
                            alert("It's raining");
                            var queryURL = "https://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC&tag=rainy";
                            $.ajax({
                                url: queryURL,
                                method: "GET"
                            })
                                .then(function (response) {
                                   
                                    var imageUrl = response.data.image_original_url;
                                    var catImage = $("<img>");
                                    catImage.attr("src", imageUrl);
                                    $("#images").prepend(catImage);
                                    
                                });




                        }
                        if (response.weather[0].main === "Snow") {
                            alert("It's snowing");
                            var queryURL = "https://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC&tag=snow";
                            $.ajax({
                                url: queryURL,
                                method: "GET"
                            })
                                .then(function (response) {
                                   
                                    var imageUrl = response.data.image_original_url;
                                    var catImage = $("<img>");
                                    catImage.attr("src", imageUrl);
                                    $("#images").prepend(catImage);
                                    
                                });
                        }

                        if (response.weather[0].main === "Clouds") {
                            alert("It's cloudy");
                            var queryURL = "https://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC&tag=cloudy";
                            $.ajax({
                                url: queryURL,
                                method: "GET"
                            })
                                .then(function (response) {
                                   
                                    var imageUrl = response.data.image_original_url;
                                    var catImage = $("<img>");
                                    catImage.attr("src", imageUrl);
                                    $("#images").prepend(catImage);
                                    
                                });

                            $.ajax({
                                url: queryURL,
                                method: "GET"
                            })

                        }
                   
                    });
            });


        </script>
    </div>
</body>

</html>